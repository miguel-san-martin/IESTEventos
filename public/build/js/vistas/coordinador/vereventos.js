async function verEventos(){const e=document.getElementById("id_user").textContent,t=new FormData;t.append("id",e);const a=baseurl+"Coordinador/eventosPublicados",o=await fetch(a,{method:"POST",body:t});tabla_vereventos(await o.json())}function tabla_vereventos(e){const t=document.querySelector("#celdas_eventos");for(;t.lastChild;)t.removeChild(t.lastChild);"0"!=Object.keys(e).length?(Swal.close(),e.forEach(e=>{const t=document.createElement("TR"),a=document.createElement("TD");a.setAttribute("data-label","Nombre"),a.textContent=e.nombre,t.appendChild(a);const o=document.createElement("TD");o.setAttribute("data-label","Fecha y hora de inicio"),o.innerHTML=obtenerFechaFormateada(e.fecha_inicio,!0)+"<br>",o.innerHTML+=obtenerFechaFormateada(e.fecha_final,!0),t.appendChild(o);const s=document.createElement("TD");s.setAttribute("data-label","Modalidad"),s.textContent=e.modalidad,t.appendChild(s);const n=document.createElement("TD");n.setAttribute("data-label","SubEventos");const i=document.createElement("P");i.textContent="Ver",i.classList.add("boton","verde"),i.addEventListener("click",(function(){window.location=`CoordinadorSubeventos?id=${e.token}&evento=${e.nombre}`})),n.appendChild(i),t.appendChild(n);const d=document.createElement("TD");d.setAttribute("data-label","Staff");const l=document.createElement("P");l.setAttribute("href","Coordinador/verevento?id="+e.id),l.classList.add("centrar-texto"),l.classList.add("boton"),l.classList.add("verde"),l.textContent="Asignar",d.appendChild(l),t.appendChild(d),l.addEventListener("click",(function(){swal_staff(e.id)}));const r=document.createElement("TD");r.setAttribute("data-label","Prueba");const c=document.createElement("P");c.setAttribute("href",""),c.classList.add("centrar-texto"),c.classList.add("boton"),c.classList.add("verde"),c.textContent="Visualizar",r.appendChild(c),t.appendChild(r);document.querySelector("#celdas_eventos").appendChild(t)})):Swal.fire({title:"No hay eventos tuyos publicados",showconfirmButton:"true",confirmButtonText:"Entiendo",showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"},customClass:{confirmButton:"sw_button verde"}})}async function swal_staff(e){const{value:t,isConfirmed:a}=await Swal.fire({customClass:{popup:"swal"},showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"},title:'Agregar Usuario a staff <i class="fa-solid fa-users"></i>',html:'<div style=""><div class=""><div class="campo"><label>Buscar por ID:</label><input id="searchId" style="text-align: center;"placeholder="ID del usuario"></div><div id="inputs"class="campo ocultar flex-div-vert"><img id="perfil" style="width: 75%; border-radius: 40%;"><label>Nombre del usuario:</label><textarea class="text-center"style="text-transform: capitalize;" id="name" placeholder="Nombre" disabled></textarea><label>Correo:</label><input  id="correo" placeholder="Correo" disabled><p id="agregarstaff"class="boton verde">Agregar al staff</p><p id="quitarstaff"class="boton rojo ocultar">Quitar del staff</p></div></div></div>',showCancelButton:!1,showConfirmButton:!1,showCloseButton:!0,didOpen:()=>{const t=document.getElementById("searchId"),a=document.getElementById("name"),o=document.getElementById("correo"),s=document.querySelector("#agregarstaff"),n=document.querySelector("#quitarstaff"),i=document.querySelector("#perfil");let d;t.addEventListener("keyup",(function(){clearTimeout(d),d=setTimeout(async()=>{Swal.showLoading();let d=`https://sie.iest.edu.mx/api/proyecto-iest-alumnos/api.php?servicio=consulta&accion=SelectBuscarPersonasStaff&idIEST=${t.value}&tipoRespuesta=json`,l=await fetch(d),r=await l.json();if(r.info&&Array.isArray(r.info)&&r.info.length>0){const d=r.info[0],l=d.nombreCompleto,c=d.correo,u=d.foto,m=await async function(e,t){let a=baseurl+`Coordinador/usuarioenstaff?id=${e}&evento=${t}`,o=await fetch(a);return(await o.json()).success}(t.value,e);Swal.hideLoading(),console.log(m),Swal.resetValidationMessage(),uservalid(!0),a.value=l,o.value=c,i.src=u,m?(s.classList.add("ocultar"),n.classList.remove("ocultar")):(s.classList.remove("ocultar"),n.classList.add("ocultar"));let f=!0;s.addEventListener("click",(function(){if(f){f=!1,agregarstaff(t.value,e)&&(s.classList.add("ocultar"),n.classList.remove("ocultar")),setTimeout((function(){f=!0}),1e3)}})),n.addEventListener("click",(function(){if(f){f=!1,eliminarstaff(t.value,e)&&(s.classList.remove("ocultar"),n.classList.add("ocultar")),setTimeout((function(){f=!0}),1e3)}}))}else uservalid(!1)},320)}))},preConfirm:()=>{}})}async function eliminarstaff(e,t){const a=new FormData;a.append("id",e),a.append("evento",t);const o=baseurl+"Coordinador/staffelimnar",s=await fetch(o,{method:"POST",body:a});let n=!1;return(await s.json()).success?(Swal.showValidationMessage("Alumno retirado del staff exitosamente"),setTimeout((function(){Swal.resetValidationMessage()}),1500),n=!0):Swal.showValidationMessage("Alumno no pudo ser retirado"),n}async function agregarstaff(e,t){const a=new FormData;a.append("id",e),a.append("evento",t);const o=baseurl+"Coordinador/staff",s=await fetch(o,{method:"POST",body:a}),n=await s.json();let i=!1;return n.success?(Swal.showValidationMessage(""+n.message),setTimeout((function(){Swal.resetValidationMessage()}),2e3),i=!0):Swal.showValidationMessage(""+n.message),i}function uservalid(e){const t=document.getElementById("inputs");e?t.classList.remove("ocultar"):(Swal.hideLoading(),Swal.showValidationMessage("No se encontro el usuario"),t.classList.add("ocultar"))}