async function actualizarevento(){const e=document.querySelector("#banner1").files[0],o=document.querySelector("#banner2").files[0],t=new FormData;t.append("idevento",evento.idevento),t.append("banner1",e),t.append("banner2",o),t.append("contacto_responsable",evento.contacto_responsable),t.append("descripcion",evento.descripcion);var i=evento.fechaini,n=evento.horai,a=evento.fechafin,s=evento.horaf,r=new Date(i+"T"+n),c=new Date(a+"T"+s);switch(t.append("fechahoraini",r),t.append("fechahorafin",c),t.append("nombre",evento.nombre),t.append("categoria",evento.categoria),t.append("nombre_responsable",evento.nombre_responsable.charAt(0).toUpperCase()+evento.nombre_responsable.slice(1)),t.append("modalidad",evento.modalidad.charAt(0).toUpperCase()+evento.modalidad.slice(1)),t.append("dirigido",evento.publico.dirigido),t.append("divisiones",evento.publico.divisiones),t.append("id_alta",evento.responsable_alta),t.append("division",evento.publico.division),t.append("token",evento.token),t.append("banner1viejo",evento.banner1viejo),t.append("banner2viejo",evento.banner2viejo),evento.modalidad){case"Presencial":t.append("lugar_id",evento.presencial.id_lugar),t.append("lugar_cupo_max",evento.presencial.lugar_cupo_max),t.append("lugar_direccion",evento.presencial.lugar_direccion),t.append("lugar_nombre",evento.presencial.lugar_nombre);break;case"Virtual":t.append("virtual_id",evento.online.id),t.append("virtual_descripcion",evento.online.virtual_descripcion),t.append("virtual_link",evento.online.virtual_link),t.append("virtual_plataformas",evento.online.plataformas)}const d=baseurl+"Coordinador/actualizarEvento",l=await fetch(d,{method:"POST",body:t}),u=await l.json();u.success?Swal.fire({icon:"success",title:"Evento Actualizado",text:""+u.message,showConfirmButton:!1,timer:1500,customClass:{popup:"swal"}}).then(e=>{window.location.href="Coordinador"}):Swal.fire({icon:"error",title:"Error al Actualizar",text:""+u.message,showConfirmButton:!1,customClass:{popup:"swal"}})}function inputsvirtuales(){const e={virtual_link:document.getElementById("virtual_link"),virtual_descripcion:document.getElementById("virtual_descripcion")};document.querySelectorAll('input[type="radio"][name="app_virtual"]').forEach(e=>{e.addEventListener("change",(function(){const e=this.value;evento.online.plataformas=e}))});for(const o in e)if(e.hasOwnProperty(o)){const t=e[o];t.addEventListener("input",(function(){evento.online[t.id]=t.value,verificarCamposCompletos(evento)}))}}function ponerDatos(){const e=document.getElementsByName("dirigido_divisiones"),o=document.getElementById("div_crear_fin"),t=document.getElementById("div_divisiones"),i=document.getElementById("div_semestres");for(let n=0;n<e.length;n++)if(e[n].checked){if(valorSeleccionado=e[n].value,"si"==valorSeleccionado&&(o.classList.add("ocultar"),t.classList.remove("ocultar")),"no"==valorSeleccionado){o.classList.add("ocultar"),t.classList.remove("ocultar"),i.classList.remove("ocultar");const e=document.getElementById("divisiones_prepa"),n=document.getElementById("divisiones_uni");switch(evento.publico.division){case"Preparatoria":e.classList.remove("ocultar");break;case"Universidad y Preparatoria":e.classList.remove("ocultar"),n.classList.remove("ocultar");break;case"Universidad":n.classList.remove("ocultar");break;case"General":t.classList.add("ocultar")}}break}"General"==evento.publico.division&&t.classList.add("ocultar"),o.classList.remove("ocultar")}function agegardivisiones(e){const o=e.value,t=document.getElementById("div_crear_fin");evento.publico.divisiones.includes(o)?evento.publico.divisiones.splice(evento.publico.divisiones.indexOf(o),1):evento.publico.divisiones.push(o),0===evento.publico.dirigido.length||0===evento.publico.divisiones.length?t.classList.add("ocultar"):t.classList.remove("ocultar")}function agregarSemestre(e){const o=document.getElementById("div_crear_fin"),t=e.value;evento.publico.dirigido.includes(t)?evento.publico.dirigido.splice(evento.publico.dirigido.indexOf(t),1):evento.publico.dirigido.push(t),0===evento.publico.dirigido.length||0===evento.publico.divisiones.length?o.classList.add("ocultar"):o.classList.remove("ocultar")}function publico_evento(e){const o=document.getElementById("div_divisiones"),t=document.getElementById("div_crear_fin");switch(e.value){case"general":o.classList.add("ocultar"),t.classList.remove("ocultar"),evento.publico.dirigido=["general"],evento.publico.divisiones=["general"],evento.publico.division="General";break;case"ambos":o.classList.remove("ocultar"),t.classList.add("ocultar"),evento.publico.dirigido=["P","U"],evento.publico.division="Universidad y Preparatoria";break;case"prepa":o.classList.remove("ocultar"),t.classList.add("ocultar"),evento.publico.dirigido=["P"],evento.publico.division="Preparatoria";break;case"uni":o.classList.remove("ocultar"),t.classList.add("ocultar"),evento.publico.dirigido=["U"],evento.publico.division="Universidad"}const i=document.querySelector('input[name="dirigido_divisiones"]:checked'),n=document.getElementById("div_semestres"),a=document.getElementById("divisiones_prepa"),s=document.getElementById("divisiones_uni");n.classList.add("ocultar"),a.classList.add("ocultar"),s.classList.add("ocultar"),i&&(i.checked=!1)}function dirigido_divisiones(e){const o=document.querySelector('input[name="dirigido_nivelEstudios"]:checked');if(null==o||""===o)Swal.fire({icon:"warning",title:"Opps...",text:"Por favor conteste para que nivel de estudios va dirigido",showConfirmButton:!1,timer:1500}),e.checked=!1;else{const n=document.getElementById("div_crear_fin"),a=document.getElementById("div_semestres"),s=document.getElementById("divisiones_prepa"),r=document.getElementById("divisiones_uni");var t=document.getElementsByName("dirigido_semestres");switch(e.value){case"si":switch(n.classList.remove("ocultar"),a.classList.add("ocultar"),s.classList.add("ocultar"),r.classList.add("ocultar"),o.value){case"ambos":evento.publico.divisiones=["ambos"],evento.publico.dirigido=["todos"],evento.publico.division=3;break;case"uni":evento.publico.divisiones=["universidad"],evento.publico.dirigido=["todos"],evento.publico.division=2;break;case"prepa":evento.publico.divisiones=["preparatoria"],evento.publico.dirigido=["todos"],evento.publico.division=1}break;case"no":switch(n.classList.add("ocultar"),a.classList.remove("ocultar"),o.value){case"ambos":s.classList.remove("ocultar"),r.classList.remove("ocultar");break;case"prepa":r.classList.add("ocultar"),s.classList.remove("ocultar");break;case"uni":r.classList.remove("ocultar"),s.classList.add("ocultar")}for(var i=0;i<t.length;i++)t[i].checked=!1;t=document.getElementsByName("semestres_prepa");for(i=0;i<t.length;i++)t[i].checked=!1;t=document.getElementsByName("semestres_uni");for(i=0;i<t.length;i++)t[i].checked=!1;evento.publico.divisiones=[],evento.publico.dirigido=[],n.classList.add("ocultar");break;default:evento.publico.divisiones=[],evento.publico.dirigido=[],n.classList.add("ocultar")}}}function verificarCamposCompletos(e){const o=document.getElementById("btn_info2");for(const t in e)if(e.hasOwnProperty(t)){const i=e[t];if("object"==typeof i){if(!verificarCamposCompletos(i))return o.classList.remove("verde"),o.classList.add("rojo"),o.textContent="Acomplete la informacion para continuar",!1}else if(!i)return o.classList.remove("verde"),o.classList.add("rojo"),o.textContent="Acomplete la informacion para continuar",!1}return o.classList.add("verde"),o.classList.remove("rojo"),o.textContent="Seguir para editar",!0}function seleccionlugar(){Swal.fire({title:"Un momento por favor!",customClass:{popup:"swal"},timer:300,icon:"info",didOpen:()=>{Swal.showLoading();document.querySelector("#selecc_lugar"),document.querySelector("#interior"),document.querySelector("#otro");obtenerlugares()}})}async function obtenerlugares(){const e=baseurl+"Coordinador/obtenerlugares",o=await fetch(e),t=(await o.json()).info,i=document.querySelector("#selecc_lugar"),n=document.querySelector("#int_direccion"),a=document.querySelector("#int_max"),s=i.value,r=t.findIndex(e=>e.id===parseInt(s));if(-1!==r){const e=t[r];n.textContent=e.lugar_direccion,a.value=null===e.lugar_cupo_max?0:parseInt(e.lugar_cupo_max),evento.presencial.lugar_nombre=e.lugar_nombre,evento.presencial.lugar_direccion=e.lugar_direccion,evento.presencial.lugar_cupo_max=a.value,evento.presencial.id_lugar=e.id}else evento.presencial.id_lugar=s}document.addEventListener("DOMContentLoaded",(function(){const e={nombre:document.getElementById("nombre"),descripcion:document.getElementById("descripcion"),nombre_responsable:document.getElementById("nombre_responsable"),contacto_responsable:document.getElementById("contacto_responsable"),seleccionModalidad:document.getElementById("modalidad"),categoria:document.getElementById("categoria"),banner1:document.getElementById("banner1"),banner2:document.getElementById("banner2")};for(const o in e)if(e.hasOwnProperty(o)){const t=e[o];t.addEventListener("input",(function(){evento[t.id]=t.value,verificarCamposCompletos(evento)}))}const o={horai:document.getElementById("horai"),fechaini:document.getElementById("fechaini"),fechafin:document.getElementById("fechafin"),horaf:document.getElementById("horaf")};for(const e in o)if(o.hasOwnProperty(e)){const t=o[e];t.addEventListener("input",(function(){evento[t.id]=t.value,verificarCamposCompletos(evento)}))}const t=document.getElementById("btn_info2"),i=document.getElementById("crear_1"),n=document.getElementById("crear_2");t.addEventListener("click",(function(){t.classList.contains("verde")?(i.classList.add("ocultar"),n.classList.remove("ocultar")):Swal.fire({icon:"error",title:"Faltan datos por llenar",showConfirmButton:!0,customClass:{popup:"swal"}})}));document.getElementById("btn_crearEvento").addEventListener("click",(function(){Swal.fire({title:"Â¿Quieres realizar cambios al evento?",showCancelButton:!0,cancelButtonText:"Cancelar",confirmButtonText:"Actualizar",customClass:{popup:"swal"},showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"}}).then(e=>{e.isConfirmed&&Swal.fire({title:"Un momento por favor",icon:"info",html:"Tratando de actualizar los cambios",timerProgressBar:!0,allowOutsideClick:!1,customClass:{popup:"swal"},showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"},didOpen:()=>{Swal.showLoading(),actualizarevento()}})})})),ponerDatos(),"Virtual"==evento.modalidad&&inputsvirtuales();document.getElementById("editar_regresar").addEventListener("click",(function(){i.classList.remove("ocultar"),n.classList.add("ocultar")}))}));