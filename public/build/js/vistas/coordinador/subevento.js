async function crear_sub(e,a,o){console.log(e);const{value:t,isConfirmed:n}=await Swal.fire({title:'Nuevo SubEvento <i class="fa-solid fa-calendar-plus"></i>',html:`\n            <div class="campo"> \n                <label>Nombre del SubEvento:</label>\n                <input id="nombre_subevento" placeholder="Taller de IA" value="${a??""}"> \n            </div>\n            <div class="campo"> \n                <label>Lugar del SubEvento:</label>\n                <textarea id="lugar_subEvento" placeholder="Laboratorio de Sistemas, Salon 101">${o}</textarea>\n            </div>\n            `,showCancelButton:!0,showConfirmButton:!0,confirmButtonText:"Enviar",cancelButtonText:"Cancelar",customClass:{popup:"swal"},preConfirm:()=>{const a=document.getElementById("nombre_subevento").value,o=document.getElementById("lugar_subEvento").value;""!=a&&""!=o?Swal.fire({title:"Cargando...",icon:"info",html:"Validando datos, por favor espere",allowOutsideClick:!1,footer:'<p class="color-grisBajo no-margin">No cierre la pagina</p>',customClass:{popup:"swalalert"},didOpen:()=>{Swal.showLoading(),sendnewSubevento(a,o,e)}}):Swal.showValidationMessage("Por favor, llena los datos")}})}async function sendnewSubevento(e,a,o){const t=new FormData;t.append("nombre_subevento",e),t.append("lugar_subEvento",a),t.append("token",o);const n=baseurl+"Coordinador/crearsubevento",l=await fetch(n,{method:"POST",body:t}),s=await l.json();s.success?Swal.fire({icon:"success",title:"Exito",text:""+s.message,showConfirmButton:!1,timer:1500,customClass:{popup:"swalalert"}}):Swal.fire({icon:"error",title:"Error",text:""+s.message,showConfirmButton:!1,timer:1500,customClass:{popup:"swalalert"},willClose:()=>{crear_sub(o,e,a)}})}async function ver_subeventos(e){const a=`${baseurl}Coordinador/apisubeventos?id=${e}`,o=await fetch(a),t=(await o.json()).info;await(async()=>{const{value:e}=await Swal.fire({title:'SubEventos <i class="fa-solid fa-eye"></i>',html:`\n        <div class="campo"> \n          <label>Selecciona el Subevento:</label>\n          <select id="subeventosSelect">\n            <option value="" selected disabled>Seleccione un subevento</option>\n            ${t.map(e=>`<option value="${e.id}">${e.nombre}</option>`).join("")}\n          </select>\n        </div>\n        <div id="formsub" class="ocultar">\n          <div class="campo">\n            <label>Nombre:</label>\n            <input id="nombre">\n          </div>\n          <div class="campo">\n            <label>Lugar:</label>\n            <input id="lugar">\n          </div>\n        </div>\n        `,footer:'<p class="letra-chica no-margin">Para actualizar un subevento, seleccione el subevento y después modifique la información del mismo.</p>',showCancelButton:!0,cancelButtonText:"Cancelar",confirmButtonText:"Actualizar",customClass:{popup:"swal"},didOpen:()=>{const e=Swal.getPopup().querySelector(".swal2-confirm");e.classList.add("ocultar");const a=document.getElementById("subeventosSelect"),o=document.getElementById("formsub");a.addEventListener("change",()=>{const n=a.options[a.selectedIndex].value,l=t.find(e=>e.id===n);if(l){const e=document.getElementById("nombre"),a=document.getElementById("lugar");e.value=l.nombre,a.value=l.lugar,o.classList.remove("ocultar")}else o.classList.add("ocultar");e.classList.remove("ocultar")}),e.addEventListener("click",()=>{const e=a.options[a.selectedIndex].value,o=document.getElementById("nombre"),t=document.getElementById("lugar"),n=o.value,l=t.value;Swal.fire({title:"Cargando...",icon:"info",html:"Tratando de actualizar...",allowOutsideClick:!1,footer:'<p class="letra-chica no-margin">No cierre la página</p>',customClass:{popup:"swalalert"},didOpen:()=>{Swal.showLoading(),actualizarSubevento(e,n,l)}})})}})})()}async function actualizarSubevento(e,a,o){const t=new FormData;t.append("subeventoId",e),t.append("nombre",a),t.append("lugar",o);const n=baseurl+"Coordinador/actualizarsubevento",l=await fetch(n,{method:"POST",body:t}),s=await l.json();console.log(s),s.success?Swal.fire({icon:"success",title:"Exito",text:""+s.message,showConfirmButton:!1,timer:1500}):Swal.fire({icon:"error",title:"Error",text:""+s.message,showConfirmButton:!1,timer:1500,customClass:{popup:"swalalert"}})}